<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js" integrity="sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js" integrity="sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH" crossorigin="anonymous"></script>
    <title>EZB - Functions</title>
  </head>
  <body>
    <a id="home" href="../thoughts.html">‚Üê</a>
    <div id="maindivalt">
      <div id="title">
        Functions 2
      </div>
      Before showing you the function that we came up with to reverse a number,
      we have to define two functions. First, $\text{len}(x, b)$, which gives
      the number of digits in $x$ when written in base $b$.

      $$ \text{len}(x, b) = \big\lceil \log_b(x + 1) \big\rceil $$

      Then, we have $\text{at}(x, b, i)$, which gives the digit at index $i$
      of $x$ when written in base $b$. This is zero-indexed and $i=0$ refers
      to the least significant digit. For example $\text{at}(123, 10, 0) = 3$

      $$ \text{at}(x, b, i) =
        \left\lfloor \frac{\lvert x \rvert}{b^i} \right\rfloor
        \text{ mod } b $$

      Here, $\text{mod}$ is an operator, not the equivalence class. Now,
      here's our definition of reverse,
      $$ \text{rev}(x, b) =
        \sum_{i = 0}^{\text{len}(x, b) - 1} \text{at}(x, b, i) \cdot
          10^{\text{len}(x, b) - i - 1} $$

      Let's break this down. The $\Sigma$ can be described as a
      &ldquo;loop&rdquo;. We loop through all of the valid indices $i$ of the
      digits in $x$. For each index $i$, we take the digit in $x$ at that
      index and &ldquo;place&rdquo; it in a new number at a new index
      $\text{len}(x, b) - i - 1$. Notice, this new index is exactly the index
      of this digit in the reversed number.
      <br>
      <br>
      What's even cooler is that we can translate our definition of
      $\text{rev}$ <i>back into code</i>. Here's a snippet using Python,
      <br>
      <br>
      <div class="code">
        <ezb-import>from</ezb-import> math <ezb-import>import</ezb-import> *
        <br>
        <br>
        <ezb-op>def</ezb-op> <ezb-builtin>len</ezb-builtin>(x, b):<br>
        &nbsp;&nbsp;<ezb-op>return</ezb-op>
          <ezb-builtin>ceil</ezb-builtin>(<ezb-builtin>log</ezb-builtin>(x
          <ezb-op>+</ezb-op> <ezb-num>1</ezb-num>, b))
        <br>
        <br>
        <ezb-op>def</ezb-op> <ezb-builtin>at</ezb-builtin>(x, b, i):<br>
        &nbsp;&nbsp;<ezb-op>return</ezb-op>
        <ezb-builtin>floor</ezb-builtin>(<ezb-builtin>abs</ezb-builtin>(x)
        <ezb-op>/</ezb-op>
        (b <ezb-op>**</ezb-op> i)) <ezb-op>%</ezb-op> b
        <br>
        <br>
        <ezb-op>def</ezb-op> <ezb-builtin>rev</ezb-builtin>(x, b):<br>
        &nbsp;&nbsp;<ezb-op>return</ezb-op>
        <ezb-builtin>sum</ezb-builtin>(<ezb-builtin>at</ezb-builtin>(x, b, i)
        <ezb-op>*</ezb-op> (<ezb-num>10</ezb-num> <ezb-op>**</ezb-op>
        (<ezb-builtin>len</ezb-builtin>(x, b) <ezb-op>-</ezb-op>
        i <ezb-op>-</ezb-op> <ezb-num>1</ezb-num>)) <br>
        &nbsp;&nbsp;&nbsp;&nbsp;<ezb-op>for</ezb-op> i <ezb-op>in</ezb-op>
        <ezb-builtin>range</ezb-builtin>(<ezb-builtin>len</ezb-builtin>(x, b)
        <ezb-op>-</ezb-op> <ezb-num>1</ezb-num>))
      </div>
      <br>
      Even though this is over 10x slower than the naive string-reversal
      approach, it's still pretty cool that this can be done using only binary
      operations.
      <br>
      <br>
      Next, we'll talk about sorting the digits of an integer.
      <div id="footer-links">
        <ul>
          <li><a href="functions_1.html">Previous</a></li>
        </ul>
      </div>
    </div>
    <script>
      renderMathInElement(
        document.body,
        {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false},
          ]
        }
      );
    </script>
  </body>
</html>
